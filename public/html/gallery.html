<!DOCTYPE html>
<html lang="en">
	<header>
		<title>Gallery</title>
		<link rel="stylesheet" type="text/css" href="../css/gallery.css" />
	</header>

	<head>
		<script>
			var xhttp = new XMLHttpRequest();
			xhttp.onreadystatechange = function () {
				if (this.readyState == 4 && this.status == 200) {
					//var responseText_JSON = JSON.stringify(this.responseText)
					//console.log(this.responseText)
					var responseText_JSON = JSON.parse(this.responseText);
					//console.log(responseText_JSON)
					var listOfKeys = [];
					for (var key in responseText_JSON) {
						if (responseText_JSON.hasOwnProperty(key)) {
							console.log(key + " -> " + responseText_JSON[key]);
							var imageDiv = document.createElement("img");
							imageDiv.src = String(responseText_JSON[key]);
							imageDiv.setAttribute("class", "feature_image", String(key));
							console.log(String(key));

							var newDiv = document.createElement("div");
							var aDiv = document.createElement("a");
							aDiv.setAttribute("href", "http://www.google.com");

							newDiv.class = "item";
							newDiv.appendChild(aDiv).appendChild(imageDiv);
							listOfKeys.push(String(key));
							//test
							var button = document.createElement("button");
							button.innerHTML = "Delete Canvas";
							button.setAttribute("id", String(key));
							newDiv.appendChild(button); //this adds button to each but doesn't have right key
							console.log("\n\nbutton key: " + String(key)); //instead do onlick event
							/*button.addEventListener ("click", function() {
          alert("key: " + button.id);
        });*/ button.setAttribute(
								"onclick",
								"functionName(this.id)"
							);
							document.getElementById("wrapper").appendChild(newDiv);
						}
					}
				}
			};

			xhttp.open("GET", "get_images", true);
			xhttp.send();
		</script>

		<script>
			function functionName(id) {
				alert("key: " + id);
			}
		</script>
	</head>

	<body>
		<form method="get">
			<button type="submit" formaction="/canvas" id="new_canvas">
				New Canvas
			</button>
		</form>

		<div class="wrapper" id="wrapper"></div>
	</body>
</html>
